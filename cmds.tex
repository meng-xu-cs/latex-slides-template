\renewcommand{\ttdefault}{pxtt}

\newcommand{\URL}{\url}
\newcommand{\cc}[1]{\mbox{\smaller[0.5]\texttt{#1}}}

\fvset{fontsize=\scriptsize,xleftmargin=8pt,numbers=left,numbersep=5pt}

\input{code/fmt}
\newcommand{\figrule}{\hrule width \hsize height .33pt}
\newcommand{\coderule}{\vspace{-0.5em}\figrule\vspace{0.2em}}

\setlength{\abovedisplayskip}{0pt}
\setlength{\abovedisplayshortskip}{0pt}
\setlength{\belowdisplayskip}{0pt}
\setlength{\belowdisplayshortskip}{0pt}
\setlength{\jot}{0pt}

\def\Snospace~{\S{}}
\def\sectionautorefname{Section}
\renewcommand*\sectionautorefname{\Snospace}
\def\sectionautorefname{\Snospace}
\def\subsectionautorefname{\Snospace}
\def\subsubsectionautorefname{\Snospace}
\def\chapterautorefname{\Snospace}
%\renewcommand{\figurename}{Fig.}
%\def\figureautorefname{\figurename}
\newcommand{\subfigureautorefname}{\figureautorefname}

%\numberwithin{equation}{section}
\newcommand{\yes}{Y}
\newcommand{\no}{}

% sema
\newcommand{\shl}{\ \cc{<}\cc{<}\ }
\newcommand{\shr}{\ \cc{>}\cc{>}\ }
\newcommand{\x}{$\times$\xspace}

\newif\ifdraft\drafttrue
\newif\ifnotes\notestrue
\ifdraft\else\notesfalse\fi

%% Ensure ligatures (e.g., ``fine official flag'') can be copy/pasted from PDF.
\input{glyphtounicode}
\pdfgentounicode=1

\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

% include macros
\newcommand{\includepdf}[1]{
  \includegraphics[width=\columnwidth]{#1}
}
\newcommand{\includeplot}[1]{
  \resizebox{\columnwidth}{!}{\input{#1}}
}

% list
\newcommand{\squishlist}{
  \begin{itemize}[noitemsep,nolistsep]
    \setlength{\itemsep}{-0pt}
          }
          \newcommand{\squishend}{
  \end{itemize}
}

%%
%% NOTE.
%%  to use circled number in caption, use
%%   (e.g., \protect\C{1})
%%
\newcommand*\C[1]{%
  \begin{tikzpicture}[baseline=(C.base)]
    \node[draw,circle,inner sep=0.2pt](C) {#1};
  \end{tikzpicture}}

\newcommand*\BC[1]{%
  \begin{tikzpicture}[baseline=(C.base)]
    \node[draw,circle,fill=black,inner sep=0.2pt](C) {\textcolor{white}{#1}};
  \end{tikzpicture}
}

\newcommand{\PP}[1]{
  \vspace{2px}
  \noindent{\bf \IfEndWith{#1}{.}{#1}{#1.}}
}

\newcommand{\ra}[1]{\renewcommand{\arraystretch}{#1}}
\newcommand{\V}{\checkmark}
\newcommand{\X}{{\footnotesize $\times$}\xspace}
\renewcommand{\O}{\phantom{0}}

%% units
\newcommand{\B}{\,\text{B}\xspace}
\newcommand{\K}{\,\text{K}\xspace}
\newcommand{\M}{\,\text{M}\xspace}
\newcommand{\T}{\,\text{T}\xspace}
\newcommand{\KB}{\,\text{KB}\xspace}
\newcommand{\MB}{\,\text{MB}\xspace}
\newcommand{\GB}{\,\text{GB}\xspace}
\newcommand{\TB}{\,\text{TB}\xspace}

\newcommand{\Bs}{\,\text{B/s}\xspace}
\newcommand{\KBs}{\,\text{KB/s}\xspace}
\newcommand{\MBs}{\,\text{MB/s}\xspace}
\newcommand{\GBs}{\,\text{GB/s}\xspace}

\newcommand{\etal}{\textit{et al}.\xspace}
\newcommand{\ie}{\textit{i}.\textit{e}.}
\newcommand{\eg}{\textit{e}.\textit{g}.}

%% comments
\newcommand{\TK}[1]{\textcolor{LimeGreen}{TK: #1}}
\newcommand{\MX}[1]{\textcolor{blue}{MK: #1}}
\newcommand{\XX}[0]{\textcolor{red}{XXX}}
\newcommand{\XXX}[1]{\textcolor{red}{XXX: #1}}
\newcommand{\TODO}[1]{\textcolor{Melon}{TODO: #1}}

%% beamer
\setlength{\leftmargini}{1em}
\setlength{\leftmarginii}{1em}
\setlength{\leftmarginiii}{1em}

\newcommand\Wider[2][5em]{%
  \makebox[\linewidth][c]{%
    \begin{minipage}{\dimexpr\textwidth+#1\relax}
      \raggedright#2
    \end{minipage}%
  }%
}

\NewDocumentCommand {\getnodedimen} {O{\nodewidth} O{\nodeheight} m} {
  \begin{pgfinterruptboundingbox}
    \begin{scope}[local bounding box=bb@temp]
      \node[inner sep=0pt, fit=(#3)] {};
    \end{scope}
    \path ($(bb@temp.north east)-(bb@temp.south west)$);
  \end{pgfinterruptboundingbox}
  \pgfgetlastxy{#1}{#2}
}